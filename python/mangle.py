from binascii import crc32

HEXMAP = dict(zip('0123456789ABCDEF', 'ABCDEFGHIJKLMNOP'))

def number(x):
	result = []
	if x < 0:
		result.append('?')
		x = -x
	if 1 <= x <= 10:
		result.append('0123456789'[x - 1])
	else:
		result.extend(HEXMAP[v] for v in f'{x:X}')
		result.append('@')
	return ''.join(result)

CHARMAP = ['?$00', '?$01', '?$02', '?$03', '?$04', '?$05', '?$06', '?$07', '?$08', '?$09', '?$0A', '?$0B', '?$0C', '?$0D', '?$0E', '?$0F', '?$10', '?$11', '?$12', '?$13', '?$14', '?$15', '?$16', '?$17', '?$18', '?$19', '?$1A', '?$1B', '?$1C', '?$1D', '?$1E', '?$1F', '?5', '?$21', '?$22', '?$23', '$', '?$25', '?$26', '?:', '?$28', '?$29', '?$2A', '?$2B', '?0', '?;', '?4', '?1', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '?3', '?$3B', '?$3C', '?$3D', '?$3E', '?$3F', '?$40', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', '?$5B', '?2', '?$5D', '?$5E', '_', '?$60', 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z', '?$7B', '?$7C', '?$7D', '?$7E', '?$7F', '?$80', '?$81', '?$82', '?$83', '?$84', '?$85', '?$86', '?$87', '?$88', '?$89', '?$8A', '?$8B', '?$8C', '?$8D', '?$8E', '?$8F', '?$90', '?$91', '?$92', '?$93', '?$94', '?$95', '?$96', '?$97', '?$98', '?$99', '?$9A', '?$9B', '?$9C', '?$9D', '?$9E', '?$9F', '?$A0', '?$A1', '?$A2', '?$A3', '?$A4', '?$A5', '?$A6', '?$A7', '?$A8', '?$A9', '?$AA', '?$AB', '?$AC', '?$AD', '?$AE', '?$AF', '?$B0', '?$B1', '?$B2', '?$B3', '?$B4', '?$B5', '?$B6', '?$B7', '?$B8', '?$B9', '?$BA', '?$BB', '?$BC', '?$BD', '?$BE', '?$BF', '?$C0', '?A', '?B', '?C', '?D', '?E', '?F', '?G', '?H', '?I', '?J', '?K', '?L', '?M', '?N', '?O', '?P', '?Q', '?R', '?S', '?T', '?U', '?V', '?W', '?X', '?Y', '?Z', '?$DB', '?$DC', '?$DD', '?$DE', '?$DF', '?$E0', '?a', '?b', '?c', '?d', '?e', '?f', '?g', '?h', '?i', '?j', '?k', '?l', '?m', '?n', '?o', '?p', '?q', '?r', '?s', '?t', '?u', '?v', '?w', '?x', '?y', '?z', '?$FB', '?$FC', '?$FD', '?$FE', '?$FF']

def strlit(x):
	result = []
	withnul = x + b'\0'
	result.append('??_C@_0')
	result.append(number(len(withnul)))
	result.append(number(crc32(withnul) ^ 0xFFFFFFFF))
	result.extend(CHARMAP[v] for v in x[:31])
	result.append('@')
	return ''.join(result)